{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index.min.js","sourcesContent":["(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['react'], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('react'), root);\n    } else {\n        // Browser globals (root is window)\n        root.AvatarEditor = factory(root.React, root);\n    }\n}(this, function (React, global) {\n    var isTouchDevice = 'ontouchstart' in window || navigator.msMaxTouchPoints > 0;\n    var draggableEvents = {\n        mobile: {\n            react: {\n                down: 'onTouchStart',\n                drag: 'onTouchMove',\n                drop: 'onTouchEnd',\n                move: 'onTouchMove',\n                up: 'onTouchUp'\n            },\n            native: {\n                down: 'touchstart',\n                drag: 'touchmove',\n                drop: 'touchend',\n                move: 'touchmove',\n                up: 'touchup'\n            }\n        },\n        desktop: {\n            react: {\n                down: 'onMouseDown',\n                drag: 'onDragOver',\n                drop: 'onDrop',\n                move: 'onMouseMove',\n                up: 'onMouseUp'\n            },\n            native: {\n                down: 'mousedown',\n                drag: 'dragStart',\n                drop: 'drop',\n                move: 'mousemove',\n                up: 'mouseup'\n            }\n        }\n    };\n    var deviceEvents = isTouchDevice ? draggableEvents.mobile : draggableEvents.desktop;\n\n    return React.createClass({\n        propTypes: {\n            scale: React.PropTypes.number,\n            image: React.PropTypes.string,\n            border: React.PropTypes.number,\n            width: React.PropTypes.number,\n            height: React.PropTypes.number,\n            color: React.PropTypes.arrayOf(React.PropTypes.number),\n            onImageReady: React.PropTypes.func,\n            style: React.PropTypes.object\n        },\n\n        getDefaultProps() {\n            return {\n                scale: 1,\n                border: 25,\n                width: 200,\n                height: 200,\n                color: [0, 0, 0, 0.5],\n                onImageReady() {},\n                style: {}\n            }\n        },\n\n        getInitialState() {\n            return {\n                drag: false,\n                my: null,\n                mx: null,\n                image: {\n                    x: 0,\n                    y: 0\n                }\n            };\n        },\n\n        getDimensions() {\n            return {\n                width: this.props.width,\n                height: this.props.height,\n                border: this.props.border,\n                canvas: {\n                    width: this.props.width + (this.props.border * 2),\n                    height: this.props.height + (this.props.border * 2)\n                }\n            }\n        },\n\n        getImage(type, quality) {\n            var dom = document.createElement('canvas');\n            var context = dom.getContext('2d');\n            var dimensions = this.getDimensions();\n\n            dom.width = dimensions.width;\n            dom.height = dimensions.height;\n\n            context.globalCompositeOperation = 'destination-over';\n\n            var imageState = this.state.image;\n\n            this.paintImage(context, {\n                resource: imageState.resource,\n                x: imageState.x - dimensions.border,\n                y: imageState.y - dimensions.border,\n                width: imageState.width,\n                height: imageState.height\n            });\n\n            return dom.toDataURL(type, quality);\n        },\n\n        isDataURL(str) {\n            var regex = /^\\s*data:([a-z]+\\/[a-z]+(;[a-z\\-]+\\=[a-z\\-]+)?)?(;base64)?,[a-z0-9\\!\\$\\&\\'\\,\\(\\)\\*\\+\\,\\;\\=\\-\\.\\_\\~\\:\\@\\/\\?\\%\\s]*\\s*$/i;\n            return !!str.match(regex);\n        },\n\n        loadImage(imageURL) {\n            var imageObj = new Image();\n            imageObj.onload = this.handleImageReady.bind(this, imageObj);\n            if (!this.isDataURL(imageURL)) imageObj.crossOrigin = 'anonymous';\n            imageObj.src = imageURL;\n        },\n\n        componentDidMount() {\n            var context = this.getDOMNode().getContext('2d');\n            if (this.props.image) {\n                this.loadImage(this.props.image);\n            }\n            this.paint(context);\n            document && document.addEventListener(deviceEvents.native.move, this.handleMouseMove, false);\n            document && document.addEventListener(deviceEvents.native.up, this.handleMouseUp, false);\n\n            if (isTouchDevice) React.initializeTouchEvents(true);\n        },\n\n        componentWillUnmount() {\n            document && document.removeEventListener(deviceEvents.native.move, this.handleMouseMove, false);\n            document && document.removeEventListener(deviceEvents.native.up, this.handleMouseUp, false);\n        },\n\n        componentDidUpdate() {\n            var context = this.getDOMNode().getContext('2d');\n            context.clearRect(0, 0, this.getDimensions().canvas.width, this.getDimensions().canvas.height);\n            this.paint(context);\n            this.paintImage(context, this.state.image);\n        },\n\n        handleImageReady(image) {\n            var imageState = this.getInitialSize(image.width, image.height);\n            imageState.resource = image;\n            imageState.x = this.props.border;\n            imageState.y = this.props.border;\n            this.setState({drag: false, image: imageState}, this.props.onImageReady);\n        },\n\n        getInitialSize(width, height) {\n            var newHeight, newWidth, dimensions, canvasRatio, imageRatio;\n\n            dimensions = this.getDimensions();\n\n            canvasRatio = dimensions.height / dimensions.width;\n            imageRatio = height / width;\n\n            if (canvasRatio > imageRatio) {\n                newHeight = (this.getDimensions().height);\n                newWidth = (width * (newHeight / height));\n            } else {\n                newWidth = (this.getDimensions().width);\n                newHeight = (height * (newWidth / width));\n            }\n\n            return {\n                height: newHeight,\n                width: newWidth\n            };\n        },\n\n        componentWillReceiveProps(newProps) {\n            if (this.props.image != newProps.image) {\n                this.loadImage(newProps.image);\n            }\n            if (this.props.scale != newProps.scale) {\n                this.squeeze(newProps);\n            }\n        },\n\n        paintImage(context, image) {\n            if (image.resource) {\n                var position = this.calculatePosition(image);\n                context.save();\n                context.globalCompositeOperation = 'destination-over';\n                context.drawImage(image.resource, image.x, image.y, position.width, position.height);\n\n                context.restore();\n            }\n        },\n\n        calculatePosition(image) {\n            image = image || this.state.image;\n            var x, y, width, height, dimensions = this.getDimensions();\n\n            width = image.width * this.props.scale;\n            height = image.height * this.props.scale;\n            var widthDiff = (width - image.width) / 2;\n            var heightDiff = (height - image.height) / 2;\n            x = image.x - widthDiff;\n            y = image.y - heightDiff;\n\n            // top and left border bounding\n            x = Math.min(x, dimensions.border);\n            y = Math.min(y, dimensions.border);\n\n            // right and bottom\n            var fromBottom = height + (y - dimensions.border);\n            y = fromBottom > dimensions.height ? y : (y + (dimensions.height - fromBottom));\n            var fromRight = width + (x - dimensions.border);\n            x = fromRight > dimensions.width ? x : (x + (dimensions.width - fromRight));\n\n            return {\n                x: x,\n                y: y,\n                height: height,\n                width: width\n            }\n        },\n\n        paint(context) {\n            context.save();\n            context.translate(0, 0);\n            context.fillStyle = \"rgba(\"+this.props.color.slice(0, 4).join(\",\")+\")\";\n\n            var dimensions = this.getDimensions();\n\n            var borderSize = dimensions.border;\n            var height = dimensions.canvas.height;\n            var width = dimensions.canvas.width;\n\n            context.fillRect(0, 0, width, borderSize); // top\n            context.fillRect(0, height - borderSize, width, borderSize); // bottom\n            context.fillRect(0, borderSize, borderSize, height - (borderSize * 2)); // left\n            context.fillRect(width - borderSize, borderSize, borderSize, height - (borderSize * 2)); // right\n\n            context.restore();\n        },\n\n        handleMouseDown() {\n            this.setState({\n                drag: true,\n                mx: null,\n                my: null\n            });\n        },\n        handleMouseUp() {\n            if (this.state.drag) {\n                this.setState({drag: false});\n            }\n        },\n\n        handleMouseMove(e) {\n            if (false == this.state.drag) {\n                return;\n            }\n\n            var imageState = this.state.image;\n            var lastX = imageState.x;\n            var lastY = imageState.y;\n\n            var mousePositionX = isTouchDevice ? event.targetTouches[0].pageX : e.clientX;\n            var mousePositionY = isTouchDevice ? event.targetTouches[0].pageY : e.clientY;\n\n            var newState = { mx: mousePositionX, my: mousePositionY, image: imageState };\n\n            if (this.state.mx && this.state.my) {\n                var xDiff = this.state.mx - mousePositionX;\n                var yDiff = this.state.my - mousePositionY;\n\n                imageState.y = this.getBoundedY(lastY - yDiff, this.props.scale);\n                imageState.x = this.getBoundedX(lastX - xDiff, this.props.scale);\n            }\n\n            this.setState(newState);\n        },\n\n        squeeze(props) {\n            var imageState = this.state.image;\n            imageState.y = this.getBoundedY(imageState.y, props.scale);\n            imageState.x = this.getBoundedX(imageState.x, props.scale);\n            this.setState({ image: imageState });\n        },\n\n        getBoundedX(x, scale) {\n            var image = this.state.image;\n            var dimensions = this.getDimensions();\n            var widthDiff = Math.ceil((image.width * scale - image.width) / 2);\n            var rightPoint = Math.ceil(-image.width * scale + dimensions.width + dimensions.border);\n            var leftPoint = dimensions.border;\n\n            var result;\n            if (x - widthDiff >= dimensions.border) result = dimensions.border + widthDiff;\n            if (x < rightPoint) result = rightPoint;\n            if (x > leftPoint) result = leftPoint;\n\n            return result || x;\n        },\n\n        getBoundedY(y, scale) {\n            var image = this.state.image;\n            var dimensions = this.getDimensions();\n            var heightDiff = Math.ceil((image.height * scale - image.height) / 2);\n            var bottomPoint = Math.ceil((-image.height * scale + dimensions.height + dimensions.border));\n            var topPoint = dimensions.border;\n\n            var result;\n            if (y - heightDiff >= dimensions.border) result = dimensions.border + heightDiff;\n            if (y < bottomPoint) result = bottomPoint;\n            if (y > topPoint) result = topPoint;\n\n            return result || y;\n        },\n\n        handleDragOver(e) {\n            e.preventDefault();\n        },\n\n        handleDrop(e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            var reader = new FileReader();\n            reader.onload = this.handleUploadReady;\n            reader.readAsDataURL(e.dataTransfer.files[0]);\n        },\n\n        handleUploadReady(e) {\n            this.loadImage(e.target.result);\n        },\n\n        render() {\n            var attributes = {\n                width: this.getDimensions().canvas.width,\n                height: this.getDimensions().canvas.height,\n                style: this.props.style\n            };\n\n            attributes[deviceEvents.react.down] = this.handleMouseDown;\n            attributes[deviceEvents.react.drag] = this.handleDragOver;\n            attributes[deviceEvents.react.drop] = this.handleDrop;\n\n            return <canvas {...attributes} />;\n        }\n\n    });\n\n}));\n"]}